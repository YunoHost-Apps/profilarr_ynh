# Redirect to add trailing slash for sub-paths (not needed for root "/")
#sub_path_only location = __PATH__ {
#sub_path_only   return 301 $scheme://$host__PATH__/;
#sub_path_only }

location __PATH__/ {
  # Disable SSOwat authentication - Profilarr handles its own auth
  auth_request off;
  
  # Simple proxy to Flask backend - it serves everything (frontend + API)
  proxy_pass http://127.0.0.1:__PORT__/;
  proxy_set_header X-Real-IP $remote_addr;
  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
  proxy_set_header X-Forwarded-Proto $scheme;
  proxy_set_header Host $host;
  proxy_http_version 1.1;
  proxy_buffering off;
}
